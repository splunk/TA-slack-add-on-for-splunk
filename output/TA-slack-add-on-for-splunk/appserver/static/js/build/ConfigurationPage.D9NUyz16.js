import{l,C as B,m as D,p as t,q as E,_ as F,o as q,x as $,y as z,z as P,U as W,W as Z,t as _,r as G,A as Q,B as Y,k as J,D as K,n as X,R as ee}from"./entry_page.js";import{P as te,B as ne,l as oe,k as re,T as ae,E as se,h as ie,j as le,b as L,M as ue,m as ce,u as de,s as pe,a as me,d as fe,C as T,e as ge,S as Ce,f as he,g as U,i as xe}from"./usePlatform.Dfxi8PgV.js";import{P as R,L as be,E as ye}from"./SearchJob.COi6F0Gx.js";const je=({tab:e})=>{const m=l.useContext(B),[a,i]=l.useState(!0),f=l.useRef(null),g=D().meta.name,x=()=>new Promise(c=>{const d=m?.[e?.customTab?.src];if(d?.type==="tab"){const s=d.component;c(s)}else e.customTab?.type==="external"?F(()=>import(`${q()}/custom/${e.customTab.src}.js`),[],import.meta.url).then(s=>{const p=s.default;c(p)}):__non_webpack_require__([`app/${g}/js/build/custom/${e.customTab?.src}`],s=>c(s))});return l.useEffect(()=>{x().then(c=>{f.current&&(new c(e,f.current).render(),i(!1))})},[]),t.jsxs(t.Fragment,{children:[a&&E._("Loading..."),t.jsx("div",{ref:f,style:{visibility:a?"hidden":"visible"}})]})},ve=_.div`
    margin-left: 270px !important;
    width: 150px;
`;function I({serviceName:e}){const m=l.useRef(),[a,i]=l.useState(null),[f,y]=l.useState(!1),[g,x]=l.useState({});l.useEffect(()=>{const s=new AbortController;return $({endpointUrl:z(`settings/${encodeURIComponent(e)}`),handleError:!0,signal:s.signal,callbackOnError:p=>{s.signal.aborted||i(p)}}).catch(p=>{if(s.signal.aborted)return null;throw p}).then(p=>{p&&x(p.entry[0].content)}),()=>{s.abort()}},[e]);const c=s=>{m.current.handleSubmit(s)},d=s=>{y(s)};if(a)throw a;return Object.keys(g).length?t.jsxs(t.Fragment,{children:[t.jsx(B.Consumer,{children:s=>t.jsx(te.Consumer,{children:p=>t.jsx(ne,{ref:m,page:P,stanzaName:e,serviceName:"settings",mode:oe,currentServiceState:g,handleFormSubmit:d,pageContext:p,customComponentContext:s})})}),t.jsx(ve,{children:t.jsx(W,{className:"saveBtn",label:E._("Save"),onClick:c,loading:f})})]}):t.jsx(Z,{size:"medium"})}I.propTypes={serviceName:R.string.isRequired};function N({selectedTab:e,updateIsPageOpen:m}){const[a,i]=l.useState({open:!1}),f=e.style===re;l.useEffect(()=>{f&&m(!!a.open)},[m,f,a]);const y=()=>{i({...a,open:!0,mode:L,formLabel:e.formTitle?`Add ${e.formTitle}`:`Add ${e.title}`})},g=()=>{i({...a,open:!1})},x=()=>t.jsx(le,{page:P,open:a.open,handleRequestClose:g,returnFocus:()=>{},serviceName:e.name,mode:L,formLabel:a.formLabel}),c=(j,v)=>{const b=e?.formTitle||e.title;i({...a,open:!0,stanzaName:j.name,formLabel:v===ue?`Clone ${b}`:`Update ${b}`,mode:v})},d=()=>{i({...a,open:!1})},s=()=>t.jsx(se,{open:a.open,handleRequestClose:d,serviceName:e.name,stanzaName:a.stanzaName,mode:a.mode,formLabel:a.formLabel,page:P}),p=()=>t.jsx("div",{style:f&&a.open?{display:"none"}:{display:"block"},children:t.jsx(ie,{page:P,serviceName:e.name,handleRequestModalOpen:()=>y(),handleOpenPageStyleDialog:c})});return t.jsxs(ae,{value:null,children:[f&&a.open&&s(),p(),!f&&a.open&&x()]})}N.propTypes={selectedTab:R.object,updateIsPageOpen:R.func};const Ee=l.memo(N);var O={exports:{}},k;function we(){return k||(k=1,(()=>{var e={};e.n=o=>{var r=o&&o.__esModule?()=>o.default:()=>o;return e.d(r,{a:r}),r},e.d=(o,r)=>{for(var u in r)e.o(r,u)&&!e.o(o,u)&&Object.defineProperty(o,u,{enumerable:!0,get:r[u]})},e.o=(o,r)=>Object.prototype.hasOwnProperty.call(o,r),e.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var m={};e.r(m),e.d(m,{default:()=>b});const a=G();var i=e.n(a);const f=Q();var y=e.n(f);const g=Y();function x(o,r){if(o==null)return{};var u,C,n=c(o,r);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(o);for(C=0;C<h.length;C++)u=h[C],r.includes(u)||{}.propertyIsEnumerable.call(o,u)&&(n[u]=o[u])}return n}function c(o,r){if(o==null)return{};var u={};for(var C in o)if({}.hasOwnProperty.call(o,C)){if(r.includes(C))continue;u[C]=o[C]}return u}var d=new Map;d.set("outlined",function(){return i().createElement(i().Fragment,null,i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.94008 2C8.11165 2 7.44008 2.67157 7.44008 3.5V9H5.47861C4.11314 9 3.45783 10.676 4.46119 11.6022L10.9824 17.6218C11.557 18.1521 12.4426 18.1521 13.0172 17.6217L19.5384 11.6022C20.5417 10.676 19.8864 9 18.5209 9H16.5553V3.5C16.5553 2.67157 15.8838 2 15.0553 2H8.94008ZM9.44008 11V4H14.5553V11H17.2421L11.9998 15.8391L6.75743 11H9.44008Z"}),i().createElement("path",{d:"M4 20C3.44772 20 3 20.4477 3 21C3 21.5523 3.44772 22 4 22H20C20.5523 22 21 21.5523 21 21C21 20.4477 20.5523 20 20 20H4Z"}))}),d.set("filled",function(){return i().createElement(i().Fragment,null,i().createElement("path",{d:"M7.44032 3.5C7.44032 2.67157 8.1119 2 8.94032 2H15.0556C15.884 2 16.5556 2.67157 16.5556 3.5V9H18.5212C19.8867 9 20.542 10.676 19.5386 11.6022L13.0174 17.6217C12.4429 18.1521 11.5572 18.1521 10.9826 17.6218L4.46143 11.6022C3.45808 10.676 4.11338 9 5.47885 9H7.44032V3.5Z"}),i().createElement("path",{d:"M3 21C3 20.4477 3.44772 20 4 20H20C20.5523 20 21 20.4477 21 21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21Z"}))});var s=["default","outlined","filled"],p=function(r){return s.indexOf(r)>=0},j=function(r){return r==="default"||r&&!p(r)?"outlined":r},v=function(r){var u=r.children,C=r.variant,n=C===void 0?"default":C,h=x(r,["children","variant"]),A=j(n),M="arrowbroadunderbardown-".concat(A),w=(0,a.useContext)(g.IconContext),S=d.get(A);if(w&&S){var H=w.toRender,V=w.addIcon;if(V(M,S()),!H)return null}return i().createElement(y(),h,u,w?i().createElement("use",{href:"#".concat(M)}):!!S&&S())};const b=v;O.exports=m})()),O.exports}var Se=we();const Pe=J(Se);function Te(e){return t.jsx(K,{target:"_blank",to:e.fileUrl,download:e.fileNameAfterDownload,"data-test":"downloadButton",icon:t.jsx(Pe,{}),children:e.children})}const _e=q().replace("js/build","openapi.json");function Oe(){return t.jsx(Te,{fileUrl:_e,fileNameAfterDownload:"openapi.json",children:"OpenAPI.json"})}const Re=_(ce.Typography)`
    font-size: 0.8em;
`,De=()=>{const e=D();if(e?.meta?.hideUCCVersion)return null;const m=e?.meta?._uccVersion??null;return t.jsxs(Re,{as:"span",title:"Splunk Add-On UCC framework is a framework to generate UI-based Splunk add-ons. It includes UI, REST handlers, Modular inputs, OAuth and Alert action templates.","data-test":"ucc-credit",children:["Made with"," ",t.jsx(be,{to:"https://splunk.github.io/addonfactory-ucc-generator/",openInNewContext:!0,children:"UCC"})," ",m]})},Ae=_.div`
    display: inline-flex;
    align-items: center;
    justify-content: end;
    flex-wrap: wrap;
    gap: 0.4rem;
`,Me=_(T.Row)`
    padding: 5px 0px;

    .dropdown {
        text-align: right;
    }

    .input_button {
        text-align: right;
        margin-right: 0px;
    }
`;function Be(){const e=D();X(e.pages.configuration,"Configuration page not found in global config");const{title:m,description:a,subDescription:i,tabs:f}=e.pages.configuration,y=de(e,"configuration"),g=f.filter(n=>!pe(n.hideForPlatform,y)),x=l.useMemo(()=>g.map(n=>n.name),[g]),c=l.useRef(!1),[d,s]=l.useState(g[0].name),[p,j]=l.useState(!1),b=me()?.get("tab");l.useEffect(()=>{b&&x.includes(b)&&b!==d&&s(b)},[b,x,d]),l.useEffect(()=>(c.current=!0,()=>{c.current=!1}),[]);const o=l.useCallback((n,{selectedTabId:h})=>{c.current&&h&&(s(h),j(!1))},[]),r=n=>{c.current&&j(n)},u=n=>ee.createElement(je,{tab:n}),C=n=>{let h;return n?.customTab?h=u(n):h=n?.table?t.jsx(Ee,{selectedTab:n,updateIsPageOpen:r},n.name):t.jsx(I,{serviceName:n.name},n.name),t.jsx("div",{style:n.name!==d?{display:"none"}:{display:"block"},id:`${n.name}Tab`,children:h},n.name)};return t.jsx(ye,{children:t.jsxs(fe,{platform:y,children:[t.jsxs("div",{style:p?{display:"none"}:{display:"block"},children:[t.jsx(T,{gutter:8,children:t.jsxs(Me,{children:[t.jsxs(T.Column,{span:9,children:[t.jsx(ge,{children:E._(m)}),t.jsx(Ce,{children:E._(a||"")}),t.jsx(he,{text:i?.text||"",links:i?.links})]}),t.jsx(T.Column,{span:3,style:{textAlignLast:"right"},children:t.jsxs(Ae,{children:[t.jsx(De,{}),t.jsx(Oe,{})]})})]})}),t.jsx(U,{activeTabId:d,onChange:o,children:g.map(n=>t.jsx(U.Tab,{label:E._(n.title),tabId:n.name},n.name))})]}),g.map(n=>C(n)),t.jsx(xe,{position:"top-right"})]})})}export{Be as default};
//# sourceMappingURL=ConfigurationPage.D9NUyz16.js.map
